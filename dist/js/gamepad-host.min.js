!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.gamepad=e()}}(function(){return function e(n,o,t){function r(c,a){if(!o[c]){if(!n[c]){var s="function"==typeof require&&require;if(!a&&s)return s(c,!0);if(i)return i(c,!0);var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}var d=o[c]={exports:{}};n[c][0].call(d.exports,function(e){var o=n[c][1][e];return r(o?o:e)},d,d.exports,e,n,o,t)}return o[c].exports}for(var i="function"==typeof require&&require,c=0;c<t.length;c++)r(t[c]);return r}({1:[function(e,n){function o(){}var t=e("./lib/modal"),r=e("./settings"),i=e("./lib/utils"),c=i.error,a=i.trace;"performance"in window||(window.performance={now:function(){return+new Date}}),"origin"in window.location&&(window.location.origin=window.location.protocol+"//"+window.location.host),o.peerHandshake=function(e){return new Promise(function(n){e||(e=i.getPeerId());var o=new Peer(e,{key:r.PEERJS_KEY,debug:r.DEBUG?3:0});window.addEventListener("beforeunload",function(){o.destroy()}),o.on("open",function(){a("My peer ID: "+o.id),n(o)})})},o.peerConnect=function(e){return new Promise(function(n,o){e.on("connection",function(e){e.on("data",function(e){a("Received: "+("object"==typeof e?JSON.stringify(e):""))}),e.on("error",function(e){c(e.message),o(e)}),n(e)})})},o.pair=function(e){return new Promise(function(n){return o.peerHandshake(e).then(function(e){var r=e.id,c=encodeURIComponent(r),a=s+"/client.html?"+c;window.history.replaceState(null,null,window.location.pathname+"?"+c);var l='<div class="overlay pair-overlay" id="pair-overlay"><h2>URL</h2><p><a href="'+a+'" class="pair-url" target="_blank">'+a+'</a></p><h2>Code</h2><p class="pair-code">'+c+"</p></div>",d=new t({id:"pairing-screen",classes:"slim",title:"Pair your mobile phone",content:l},!0);setTimeout(function(){d.open()},150),["https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700","../css/modal.css"].forEach(function(e){i.injectCSS({href:e})}),o.peerConnect(e).then(function(e){console.log("Peer connected"),d.close(),n(e)})}).catch(console.error.bind(console))})},o.hidePairingScreen=function(){t.closeAll()},o.version=r.VERSION;var s=window.location.origin,l=document.querySelector("[data-galaxy-origin]");l&&(o.galaxyOrigin=l.dataset.galaxyOrigin),n.exports=o},{"./lib/modal":2,"./lib/utils":3,"./settings":4}],2:[function(e,n){function o(e,n){Object.keys(e).forEach(function(n){this[n]=e[n]}.bind(this)),n&&this.inject()}var t=e("./utils");o.closeAll=o.prototype.close=function(){var e=document.querySelector(".md-show");e&&e.classList.remove("md-show"),setTimeout(function(){document.body.classList.remove("galaxy-overlayed")},150)},o.injectOverlay=function(){if(!document.querySelector(".md-overlay")){var e=document.createElement("div");e.className="md-overlay",document.body.appendChild(e)}},o.prototype.html=function(){var e=document.createElement("div");return e.id="modal-"+this.id,e.className="md-modal md-effect-1 "+(this.classes||""),e.innerHTML='<div class="md-content"><h3>'+t.escape(this.title)+'</h3> <a class="md-close" title="Close"><span><div>Close</div></span></a><div>'+this.content+"</div></div>",e},o.prototype.inject=function(){return o.injectOverlay(),this.el=this.html(),document.body.appendChild(this.el),document.body.classList.add("galaxy-overlayed"),this.el},o.prototype.open=function(){this.el.classList.add("md-show")},n.exports=o},{"./utils":3}],3:[function(e,n){function o(e,n){console[n||"log"]((window.performance.now()/1e3).toFixed(3)+": "+e)}function t(e){return o(e,"error")}function r(e){return o(e,"warn")}function i(){return window.location.pathname.indexOf(".html")?window.location.search.substr(1):window.location.pathname.substr(1)}function c(e){return-1!==d.indexOf(e.target.nodeName.toLowerCase())}function a(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}function s(e){var n=document.createElement("link");n.href=e.href,n.media="all",n.rel="stylesheet",n.type="text/css",Object.keys(e||{}).forEach(function(o){n[o]=e[o]}),document.querySelector("head").appendChild(n)}function l(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;"):e}var d=["input","keygen","meter","option","output","progress","select","textarea"];n.exports.trace=o,n.exports.error=t,n.exports.warn=r,n.exports.getPeerId=i,n.exports.fieldFocused=c,n.exports.hasTouchEvents=a,n.exports.injectCSS=s,n.exports.escape=l},{}],4:[function(e,n){var o={};try{o=e("./settings_local.js")}catch(t){}var r={API_URL:"http://localhost:5000",DEBUG:!1,PEERJS_KEY:"",VERSION:"0.0.1"};for(var i in o)r[i]=o[i];n.exports=r},{"./settings_local.js":5}],5:[function(e,n){n.exports={DEBUG:!0,PEERJS_KEY:"rovu5xmqo69wwmi"}},{}]},{},[1])(1)});