!function e(t,o,n){function r(a,c){if(!o[a]){if(!t[a]){var u="function"==typeof require&&require;if(!c&&u)return u(a,!0);if(s)return s(a,!0);var i=new Error("Cannot find module '"+a+"'");throw i.code="MODULE_NOT_FOUND",i}var l=o[a]={exports:{}};t[a][0].call(l.exports,function(e){var o=t[a][1][e];return r(o?o:e)},l,l.exports,e,t,o,n)}return o[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(e){function t(e){u.DEBUG&&console.log("Sent: "+("object"==typeof e?JSON.stringify(e):e)),p.send(e)}function o(e,t){var o=e.getContext("2d"),n=0;for(o.beginPath(),o.moveTo(t[0][0],t[0][1]),t.slice(1);n<t.length;n++)o.lineTo(t[n][0],t[n][1]);return o.closePath(),o}function n(e,t,o,n){var r=e.createLinearGradient(n[0],n[1],n[2],n[3]);r.addColorStop(0,t),r.addColorStop(1,o),e.fillStyle=r,e.fill()}function r(e,t,r,s){var a=o(e,[[t,r],[t+5,r+3.5],[t+5,s+3.5],[t,s]]);n(a,"#666","#000",[t,r,t+15,r])}function s(e,t,r,s){var a=o(e,[[r,t],[r+5,t+3.5],[s+5,t+3.5],[s,t]]);n(a,"#666","#000",[r,t,r,t+15])}function a(e,o,n){document.querySelector("#"+e).addEventListener(o,function(){x[e]=n,t(x)})}function c(e,o){document.addEventListener(e,function(e){if(!i.fieldFocused(e)){switch(e.keyCode){case 38:if(o&&x.up)return;x.up=o,m.className=o?"up":"";break;case 39:if(o&&x.right)return;x.right=o,m.className=o?"right":"";break;case 40:if(o&&x.down)return;x.down=o,m.className=o?"down":"";break;case 37:if(o&&x.left)return;x.left=o,m.className=o?"left":"";break;case 13:if(o&&x.start)return;x.start=o,v.dataset.pressed=+o;break;case 65:if(o&&x.a)return;x.a=o,g.dataset.pressed=+o;break;case 66:if(o&&x.b)return;x.b=o,y.dataset.pressed=+o;break;default:if(!(e.shiftKey||!o&&x.select))return;x.select=o,w.dataset.pressed=+o}t(x)}})}var u=e("./settings"),i=e("./lib/utils"),l=i.error,d=i.trace,f=i.getPins(),h=new Peer(f.controller,{key:u.PEERJS_KEY,debug:u.DEBUG?3:0});window.addEventListener("beforeunload",function(){h.destroy()});var p=h.connect(f.host);p.on("open",function(){d("My peer ID: "+h.id),d("My connection ID: "+p.id),p.on("data",function(e){d("Received: "+e)}),p.on("error",function(e){l(e.message)}),t({status:"ready"})});var m=document.querySelector("#dpad"),w=document.querySelector("#select"),v=document.querySelector("#start"),y=document.querySelector("#b"),g=document.querySelector("#a");!function(){"use strict";for(var e=0,t=m.getElementsByClassName("button"),o=function(){m.className=this.id,document.onmouseup=function(){m.className=""}};e<t.length;e++)t[e].onmousedown=o}();var b=document.getElementById("dpad-body");s(b,63.5,0,100),s(b,100,36.5,63.5),r(b,63.5,0,36.5),r(b,63.5,63.5,100),r(b,100,36.5,63.5);var E=o(b,[[0,36.5],[36.5,36.5],[36.5,0],[63.5,0],[63.5,36.5],[100,36.5],[100,63.5],[63.5,63.5],[63.5,100],[36.5,100],[36.5,63],[0,63.5]]);E.fillStyle="#1a1a1a",E.shadowColor="rgba(0,0,0,.6)",E.shadowBlur=15,E.shadowOffsetX=20,E.shadowOffsetY=10,E.fill();var x={up:!1,right:!1,down:!1,left:!1,select:!1,start:!1,b:!1,a:!1};Object.keys(x).forEach(function(e){i.hasTouchEvents()?(a(e,"touchstart",!0),a(e,"touchend",!1)):(a(e,"mousedown",!0),a(e,"mouseup",!1))}),c("keydown",!0),c("keyup",!1)},{"./lib/utils":2,"./settings":3}],2:[function(e,t){function o(e,t){console[t||"log"]((window.performance.now()/1e3).toFixed(3)+": "+e)}function n(e){return o(e,"error")}function r(e){return o(e,"warn")}function s(){var e=window.location.pathname.indexOf(".html")?window.location.search.substr(1):window.location.pathname.substr(1),t={host:e,controller:e};return e?("host_"!==e.substr(0,11)&&(t.host="host_"+t.host),"controller_"!==e.substr(0,11)&&(t.controller="controller_"+t.controller),t):t}function a(e){return-1!==u.indexOf(e.target.nodeName.toLowerCase())}function c(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}var u=["input","keygen","meter","option","output","progress","select","textarea"];t.exports.trace=o,t.exports.error=n,t.exports.warn=r,t.exports.getPins=s,t.exports.fieldFocused=a,t.exports.hasTouchEvents=c},{}],3:[function(e,t){var o={};try{o=e("./settings_local.js")}catch(n){}var r={API_URL:"http://localhost:5000",DEBUG:!1,PEERJS_KEY:"",VERSION:"0.0.1"};for(var s in o)r[s]=o[s];t.exports=r},{"./settings_local.js":4}],4:[function(e,t){t.exports={DEBUG:!0,PEERJS_KEY:"r1kfe5ze21iw9udi"}},{}]},{},[1]);