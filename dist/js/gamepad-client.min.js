!function e(t,n,r){function o(l,u){if(!n[l]){if(!t[l]){var i="function"==typeof require&&require;if(!u&&i)return i(l,!0);if(c)return c(l,!0);var s=new Error("Cannot find module '"+l+"'");throw s.code="MODULE_NOT_FOUND",s}var a=n[l]={exports:{}};t[l][0].call(a.exports,function(e){var n=t[l][1][e];return o(n?n:e)},a,a.exports,e,t,n,r)}return n[l].exports}for(var c="function"==typeof require&&require,l=0;l<r.length;l++)o(r[l]);return o}({1:[function(e){!function(t,n){"use strict";function r(){return!("disableAutoFullScreen"in localStorage)}function o(e){d.DEBUG&&console.log("Sent: "+("object"==typeof e?JSON.stringify(e):e)),w.send(e)}function c(e,t){var n=e.getContext("2d"),r=0;for(n.beginPath(),n.moveTo(t[0][0],t[0][1]),t.slice(1);r<t.length;r++)n.lineTo(t[r][0],t[r][1]);return n.closePath(),n}function l(e,t,n,r){var o=e.createLinearGradient(r[0],r[1],r[2],r[3]);o.addColorStop(0,t),o.addColorStop(1,n),e.fillStyle=o,e.fill()}function u(e,t,n,r){var o=c(e,[[t,n],[t+5,n+3.5],[t+5,r+3.5],[t,r]]);l(o,"#666","#000",[t,n,t+15,n])}function i(e,t,n,r){var o=c(e,[[n,t],[n+5,t+3.5],[r+5,t+3.5],[r,t]]);l(o,"#666","#000",[n,t,n,t+15])}function s(e,t,r){n.querySelector("#"+e).addEventListener(t,function(t){t.target&&t.target.parentNode===h&&h.classList.toggle(this.id),k[e]=r,o({type:"state",data:k})})}function a(e,t){n.addEventListener(e,function(e){if(!f.fieldFocused(e)){switch(e.keyCode){case 38:if(t&&k.up)return;k.up=t,h.className=t?"up":"";break;case 39:if(t&&k.right)return;k.right=t,h.className=t?"right":"";break;case 40:if(t&&k.down)return;k.down=t,h.className=t?"down":"";break;case 37:if(t&&k.left)return;k.left=t,h.className=t?"left":"";break;case 13:if(t&&k.start)return;k.start=t,y.dataset.pressed=+t;break;case 65:if(t&&k.a)return;k.a=t,F.dataset.pressed=+t;break;case 66:if(t&&k.b)return;k.b=t,x.dataset.pressed=+t;break;default:if(!(e.shiftKey||!t&&k.select))return;k.select=t,v.dataset.pressed=+t}o(k)}})}var d=e("./settings"),f=e("./lib/utils"),m=f.error,p=f.trace;f.polyfill(t),f.lockOrientation("landscape-primary"),n.addEventListener("keyup",function(e){if(!f.fieldFocused(e))switch(e.keyCode){case 70:return p('User pressed "F"; entering/exiting fullscreen'),f.toggleFullScreen();case 78:return p('User pressed "NF"; exiting fullscreen and will not automatically open next time'),localStorage.disableAutoFullScreen="1",f.toggleFullScreen()}}),n.addEventListener("click",function(e){!f.fieldFocused(e)&&r()&&(p("Automatically entering fullscreen"),f.toggleFullScreen())});var g=f.getPeerId(),E=new Peer("controller_"+g,{key:d.PEERJS_KEY,debug:d.DEBUG?3:0});t.addEventListener("beforeunload",function(){E.destroy()});var w=E.connect(g);w.on("open",function(){p("My peer ID: "+E.id),p("My connection ID: "+w.id),w.on("data",function(e){p("Received: "+e)}),w.on("error",function(e){m(e.message)})});var h=n.querySelector("#dpad"),v=n.querySelector("#select"),y=n.querySelector("#start"),x=n.querySelector("#b"),F=n.querySelector("#a"),b=n.getElementById("dpad-body");i(b,63.5,0,100),i(b,100,36.5,63.5),u(b,63.5,0,36.5),u(b,63.5,63.5,100),u(b,100,36.5,63.5);var S=c(b,[[0,36.5],[36.5,36.5],[36.5,0],[63.5,0],[63.5,36.5],[100,36.5],[100,63.5],[63.5,63.5],[63.5,100],[36.5,100],[36.5,63],[0,63.5]]);S.fillStyle="#1a1a1a",S.shadowColor="rgba(0,0,0,.6)",S.shadowBlur=15,S.shadowOffsetX=20,S.shadowOffsetY=10,S.fill();var k={up:!1,right:!1,down:!1,left:!1,select:!1,start:!1,b:!1,a:!1};Object.keys(k).forEach(function(e){f.hasTouchEvents()?(s(e,"touchstart",!0),s(e,"touchend",!1)):(s(e,"mousedown",!0),s(e,"mouseup",!1))}),a("keydown",!0),a("keyup",!1)}(window,document)},{"./lib/utils":2,"./settings":3}],2:[function(e,t){function n(e,t){console[t||"log"]((window.performance.now()/1e3).toFixed(3)+": "+e)}function r(e){return n(e,"error")}function o(e){return n(e,"warn")}function c(e){"performance"in e||(e.performance={now:function(){return+new Date}}),"origin"in e.location&&(e.location.origin=e.location.protocol+"//"+e.location.host)}function l(){return window.location.pathname.indexOf(".html")?window.location.search.substr(1):window.location.pathname.substr(1)}function u(e){return-1!==g.indexOf(e.target.nodeName.toLowerCase())}function i(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}function s(e){var t=document.createElement("link");t.href=e.href,t.media="all",t.rel="stylesheet",t.type="text/css",Object.keys(e||{}).forEach(function(n){t[n]=e[n]}),document.querySelector("head").appendChild(t)}function a(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;"):e}function d(){return!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)}function f(){d()?(n("Entering full screen"),document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen()):(n("Exiting full screen"),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen())}function m(){var e=screen.LockOrientation||screen.mozLockOrientation||screen.webkitLockOrientation||screen.msLockOrientation;return e?(e(orientation),void 0):o("Orientation could not be locked")}function p(e){var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!0),t.eventName=e,(document.body||window).dispatchEvent(t)}var g=["input","keygen","meter","option","output","progress","select","textarea"];t.exports.trace=n,t.exports.error=r,t.exports.warn=o,t.exports.polyfill=c,t.exports.getPeerId=l,t.exports.fieldFocused=u,t.exports.hasTouchEvents=i,t.exports.injectCSS=s,t.exports.escape=a,t.exports.isFullScreen=d,t.exports.toggleFullScreen=f,t.exports.lockOrientation=m,t.exports.triggerEvent=p},{}],3:[function(e,t){var n={};try{n=e("./settings_local.js")}catch(r){}var o={API_URL:"http://localhost:5000",DEBUG:!1,PEERJS_KEY:"",VERSION:"0.0.1"};for(var c in n)o[c]=n[c];t.exports=o},{"./settings_local.js":4}],4:[function(e,t){t.exports={DEBUG:!0,PEERJS_KEY:"rovu5xmqo69wwmi"}},{}]},{},[1]);