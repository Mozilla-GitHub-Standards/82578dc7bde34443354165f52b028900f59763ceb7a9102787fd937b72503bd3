<!doctype>
<html>
  <head>
  </head>
  <body>
    <!-- todo: make a separate bundle -->
    <script src="http://cdn.peerjs.com/0.3/peer.js"></script>
    <!-- <script src="http://cdnjs.cloudflare.com/ajax/libs/zepto/1.1.4/zepto.js"></script> -->
    <script data-galaxy-origin="http://localhost:3000">
      var galaxyOrigin = document.querySelector('[data-galaxy-origin]').dataset.galaxyOrigin || '';

      // todo: allow
      var p = new Peer({key: settings.PEER_KEY});
      p.on('open', function (pairId) {
        trace('My peer ID: ' + pairId);

        var pairUrl = galaxyOrigin + '/gamepad.html?' + pairId;

        // todo: make a modal.
        var overlay = document.createElement('div');
        overlay.className = 'overlay';
        overlay.innerHTML = overlayHTML;

        var overlayHTML = (
          '<div class="overlay">' +
            '<div class="pair">URL: <a href="' + pairUrl + '" class="pair-url">' + pairUrl + '</b></div>' +
            '<div class="code-heading">Code: <b class="pair-code">' + pairId + '</b></div>' +
          '</div>'
        );
        document.body.appendChild(overlay);
      });
    </script>
  </body>
</html>
